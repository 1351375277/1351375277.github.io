---
title: clover config.plist简介与参数介绍
layout: post
permalink: /1071.html
category: clover
tags: [clover , dsdt]
date : 2014-3-13
duoshuo: true
---

##原文
1.前往:<http://www.projectosx.com/forum/index.php?showtopic=2543>
2.前往:<http://www.insanelymac.com/forum/topic/282787-clover-v2-instructions/page__st__20#entry1878476>
3.wiki:<http://clover-wiki.zetam.org/Configuration>


config配置助手（還比較簡單）：

CloverConfiguratorUpdate傳送門：<http://pan.baidu.com/s/1hqFWcSk>

MD5：`3ec049698fbb955b7d6a66501d0ca8ee`
请注意随时更新以支持最新版clover。
win版助手WIN-CloverConfiguratorSetup 传送门 ：<http://pan.baidu.com/s/1i3LtH2l>
MD5：`1c7e31871363e7877571538fc397ca72`

**注意**
win版不支持v2000以后的版本。至于后续有否支持，随时注意跟进。win下编辑软件推荐推荐sublime text或notepad++。mac下手动修改软件当然是plisteditor pro。xcode当然也可以。获取现有clover(安装的clover版本v1672+)配置的脚本
GetCloverConfig传送门：<http://pan.baidu.com/s/1sjrrmX3>
MD5：`d4bee8bb5e3a422c2ee3b469798056c6`
1980后 传送门：<http://pan.baidu.com/s/1sj4izWp>
MD5：`1c21730193a85b91f701e66ade57d038`
 v2132 后 传送门：<http://pan.baidu.com/s/1gdn7QvT>
MD5：`9c1f3e3428b58516774301c7157ed751`
新版文件名改为`clover-genconfig`，so，注意运行命令时文件名对应更改。
这个脚本可获取现有clover配置的详细信息，
假设附件解压在桌面终端执行如下命令：

![](/wp-content/uploads/sinapicv2-backup/1071-ww3-bmiddle-a316108djw1enw8jv7bmqj20go0bgwff.jpg)
在新版的clvoer config助手中，也增加啦这个功能如下：
![](/wp-content/uploads/sinapicv2-backup/1071-ww2-bmiddle-a316108djw1enw8jsvvmfj20go04gq3v.jpg)

## SystemParameters块参数介绍:

新版参数：
![](/wp-content/uploads/sinapicv2-backup/1071-ww3-bmiddle-a316108djw1enw8jr0yonj20fc040aak.jpg)
即：


<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>SystemParameters</key>
        <dict>
                <key>BacklightLevel</key>
                <string>0xffff</string>
                <key>CustomUUID</key>
                <string></string>
                <key>InjectKexts</key>
                <false/>
                <key>InjectSystemID</key>
                <true/>
        </dict>
</pre>

InjectKexts:加载clover下的额外kext.所谓额外kext就是在EFI分区下的`EFI/CLOVER/KEXTS/`下10.9,10.8,10.7和other下的kext。其中clover注入kext是有规则的。当搜索到对应版本（系统版本，如我是10.9的，对应文件夹就是10.9）的文件夹后就不在搜索其他含有kext的文件夹，即使搜索到相应版本的文件夹为空。
BacklightLevel：笔记本背景亮度调节，0xFFFF是最亮的，默认值0x0501，台式机可忽略。
CustomUUID：定制uuid。这个uuid值可以是变色龙启动时显示的systemid，也可以是在系统信息中的硬件UUID。我的设置为systemid，同时

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>InjectSystemID</key>
<true/>
</pre>

这样设置，无论变色龙和clover其对应硬件id和sytstem id相同（同一引导的硬件id和system id不同）。
在终端输入：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
ioreg -l -p IODeviceTree | grep "system-id
</pre>
可直接查看system id。

这边我比较迷糊，谁比较了解的说一下：
<http://www.projectosx.com/forum/index.php?showtopic=2543>
post#5
InjectSystemID=Yes- device tree injection ：注入设备树ID,也就是IODeviceTree:/efi/platform/system-id
InjectSystemID=No – runtime vars injection：注入运行时变量，也就是IODeviceTree:/options/platform-uuid

## SMBIOS块参数

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>SMBIOS</key>
        <dict>
                <key>BiosReleaseDate</key>
                <string>05/03/10</string>
                <key>BiosVendor</key>
                <string>Apple Inc.</string>
                <key>BiosVersion</key>
                <string>MB11.88Z.0061.B03.0809221748<string>
                <key>Board-ID</key>
                <string>Mac-F4208CC8</string>
                <key>BoardManufacturer</key>
                <string>Apple Inc.</string>
                <key>BoardSerialNumber</key>
                <string>C02032101R5DC771H</string>
                <key>BoardType</key>
                <integer>10</integer>
                <key>BoardVersion</key>
                <string>Proto1</string>
                <key>ChassisAssetTag</key>
                <string>LatitudeD420</string>
                <key>ChassisManufacturer</key>
                <string>Apple Inc.</string>
                <key>ChassisType</key>
                <integer>16</integer>
                <key>Family</key>
                <string>MacBook</string>
                <key>FirmwareFeatures</key>
                <string>0xC0001403</string>
                <key>LocationInChassis</key>
                <string>Part Component</string>
                <key>Manufacturer</key>
                <string>Apple Inc.</string>
                <key>Mobile</key>
                <true/>
                <key>ProductName</key>
                <string>MacBook1,1</string>
                <key>SerialNumber</key>
                <string>4H629LYAU9C</string>
                <key>SmUUID</key>
                <string>00000000-0000-1000-8000-010203040506</string>
                <key>Trust</key>
                <true/>
                <key>Version</key>
                <string>1.0</string>
        </dict>
</pre>

   

这块参数中除啦一些值我们可以由变色龙的smbios中转换过来其他不少没有资料找到这些值。
Trust：设置为yes（默认）,这个值和内置定义的smbios table挂钩，如果你的内存侦测存在问题请设置为NO试试（默认就是YES)
自V1896，smbios块参数中增加内存插槽及其参数定制。内存和插槽识别不对的可以试试。


<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>SMBIOS</key>
<dict>
   <key>Memory</key>
   <dict>
      <key>Channels</key>
      <integer>1/2/3/4</integer> OR <string>1/2/3/4</string>
      <key>SlotCount</key>
      <integer>24</integer> OR <string>24</string>
      <key>Modules</key>
      <array>
         <dict>
            <key>Slot</key>
            <integer>0</integer> OR <string>0</string>
            <key>Size</key>
            <integer>2048</integer> OR <string>2048</string>
            <key>Frequency</key>
            <integer>1600</integer> OR <string>1600</string>
            <key>Vendor</key>
            <string>Some Company</string>
            <key>Part</key>
            <string>123456ABCDEF</string>
            <key>Serial</key>
            <string>ABCDEF123456</string>
            <key>Type</key>
            <string>DDR/DDR2/DDR3</string>
         </dict>
         ...
         <dict>
            <key>Slot</key>
            <integer>N</integer>
            <key>Size</key>
            <integer>2048</integer>
            <key>Frequency</key>
            <integer>1600</integer>
            <key>Vendor</key>
            <string>Some Company</string>
            <key>Part</key>
            <string>123456ABCDEF</string>
            <key>Serial</key>
            <string>ABCDEF123456</string>
            <key>Type</key>
            <string>DDR3</string>
         </dict>
      </array>
   </dict>
</dict>

</pre>


Channels：为通道数。一般主板是双通道，即数值为2
SlotCount：插槽数，最大可支持24个插槽。
Size：内存大小。通用有：512，1024，2048，4096.可整型，可字符型
Frequency：内存频率。常用800，1300，1600
slot:插槽位置，值可为整型，也可字符型.值0~24.Type：内存条类型，有DDR2,DDR3,DDR
Vendor：制造商，如kingston
帖出自己config.plist以作参考。自测中，我的加拉反而不正常。所以建议识别正常的就不用管啦。

**config.plist 传送门**:<http://pan.baidu.com/s/1kTMB7Hd>
MD5：`7677ae77637ba08049d647612ebc45b9`

其实这块参数你可以不用设置，对于clover，它会自动设置认为合适你电脑配置的机型。如果你要设置特定的机型，只需设置

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>ProductName</key>
<string>MacBook1,1</string>
</pre>

就可以啦。如果你想保证SerialNumber和变色龙的一致，只要再加一个SerialNumber参数即可：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>SerialNumber</key>
<string>4H629LYAU9C</string>
</pre>

当然最好Trust这个值也保留并设为yes。

clover内建支持的机型：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
MacBook1,1
MacBook2,1
MacBook4,1
MacBook5,2
MacBookPro5,1
MacBookPro8,1
MacBookPro8,3
MacBookPro9,2
MacBookAir3,1
MacBookAir5,2
Macmini2,1
Macmini5,1
Macmini6,2
iMac8,1
iMac10,1
iMac11,1
iMac11,2
iMac11,3
iMac12,1
iMac12,2
iMac13,1
iMac13,2
MacPro3,1
MacPro4,1
MacPro5,1
</pre>

大多数情况下我们只需设置这两个值就可以啦，其他值clover会自己采用。原先不知道在那下过可把变色龙*boot.plist和smbios.plist转换成config.plist的脚本，现在不知道跑哪去……

呵，终于找到这个脚本啦:直接解压 然后拖到终端 +*boot.plist +smbios.plist 其会在桌面生成config.plist,当然此config.plist只供参考，因为config.plist一直在调整，该脚本没有做相应微调

**parse V1.1.sh 传送门**:<http://pan.baidu.com/s/1o6rxsP8>
MD5：`56dd85a57268dc46a82148b7c70b5ce3`


在六月份出啦个clover配置助手，该楼顶部已经给我，注意更新，已经可以选择机型修改smbios。

##RtVariables块参数

自v20**后，MLB参数回归，并增加rom参数

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>MLB</key>
<string>C02140302D5DMT31M</string>
<key>MountEFI</key>
<string>_NOT_SHOWN_</string>
<key>ROM</key>
<string>_NOT_SHOWN_</string>
</pre>

rom参数值为十二位十六进制。这个参数一般会从smbios中获取。一般不管。此项设置有关网卡的mac地址。既反映此值可随机。

MLB：和主板 serial number相关，17位数。其设置无别规则。最好的设置是sm+五个随机数，12位系列号加5个数随你选择。在以前可解决imessage登入后重启退出无法再次登入的的问题。现在加这个不知道有什么特别的意思。

LogEveryBoot：每次启动os时写如bootlog，默认开启
YESLogLineCount:记录log的最大行数，默认3000
MountEFI：挂载EFI分区，默认不挂载
改参数后，删掉nvram.plist（隐藏文件，默认mac引导分区根目录）,不然参数不会生效。

##Devices块参数

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>Devices</key>
        <dict>
                <key>AddProperties</key>
                <array>
                        <dict>
                                <key>Device</key>
                                <string>NVidia</string>
                                <key>Key</key>
                                <string>AAPL,HasPanel</string>
                                <key>Value</key>
                                <data>
                                AQAAAA==
                                </data>
                        </dict>
                        <dict>
                                <key>Device</key>
                                <string>NVidia</string>
                                <key>Key</key>
                                <string>AAPL,Haslid</string>
                                <key>Value</key>
                                <data>
                                AQAAAA==
                                </data>
                        </dict>
                </array>
                <key>Audio</key>
                <dict>
                        <key>Inject</key>
                        <string>No</string>
                </dict>
                <key>FakeID</key>
                <dict>
                        <key>ATI</key>
                        <string>0x67501002</string>
                        <key>IntelGFX</key>
                        <string>0x0126</string>
                        <key>LAN</key>
                        <string>0x20008086</string>
                        <key>NVidia</key>
                        <string>0x0</string>
                        <key>SATA</key>
                        <string>0x25628086</string>
                        <key>WIFI</key>
                        <string>0x431214e4</string>
                        <key>XHCI</key>
                        <string>0x0</string>
                </dict>
                <key>Properties</key>
                <string>7a00000001000000010000006e0000000200000002010c00d041030a0000000001010600001b7fff040028000000500069006e0043006f006e00660069006700750072006100740069006f006e00730000000800000001080100180000006c00610079006f00750074002d00690064000000080000000c000000</string>
                <key>USB</key>
                <dict>
                        <key>AddClockID</key>
                        <true/>
                        <key>Inject</key>
                        <true/>
                        <key>USBFixOwnership</key>
                        <true/>
                </dict>
        </dict>
</pre>

这块主要是控制设备的属性。
AddProperties块，主要是增加一些设备的额外功能。此功能不是很完善。如模板中是增加亮度控制面板。
在来是FakeID项目。仿冒id。在注入该某些设备的属性的同时，我们希望注入不是该设备本身固有的id，已达到我们所希望的功能。
Audio：声卡注入。string，字符型。其值一般可谓detect（以为自动侦测），也可手动输入你要的值。如声卡为887，假设在0x0C(12)是工作，则直接填写12或0x0c。有关仿冒声卡的layout -id，自己搜索相关型号的仿冒声卡或教程。不是说启用这个功能声卡就可以工作喽。
addClockID：默认开启，使得唤醒mac后，usb依旧正常工作
USBInjection：使得usb键盘鼠标能唤醒os
USBFixOwnership：（是/否，默认：是的，如果使用UEFI）修复USB所有权问题在UEFI模式引导时。
Properties：属性注入。注入EFI-string，一楼已经给出教程

##KernelAndKextPatches块参数

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>KernelAndKextPatches</key>
        <dict>
                <key>ATIConnectorsController</key>
                <string>6000</string>
                <key>ATIConnectorsData</key>        <string>000400000403000000010000210302040400000014020000000100000000040310000000100000000001000000000001</string>
                <key>ATIConnectorsPatch</key>        <string>040000001402000000010000000004040004000004030000000100001102010500000000000000000000000000000000</string>
                <key>AppleRTC</key>
                <true/>
                <key>AsusAICPUPM</key>
                <false/>
                <key>Debug</key>
                <false/>
                <key>KernelCpu</key>
                <false/>
                <key>KernelLapic</key>
                <false/>
                <key>KextsToPatch</key>
                <array>
                        <dict>
                                <key>Find</key>
                                <data>
                                SGVhZHBob25lcwA=
                                </data>
                                <key>Name</key>
                                <string>VoodooHDA</string>
                                <key>Replace</key>
                                <data>
                                VGVsZXBob25lcwA=
                                </data>
                        </dict>
                        <dict>
                                <key>Comment</key>
                                <string>Patch_to_not_load_this_driver</string>
                                <key>Find</key>
                                <string>0x04020000</string>
                                <key>InfoPlistPatch</key>
                                <true/>
                                <key>Name</key>
                                <string>AppleHDAController</string>
                                <key>Replace</key>
                                <string>0x44220000</string>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                TA==
                                </data>
                                <key>Name</key>
                                <string>IOBlockStorage</string>
                                <key>Replace</key>
                                <data>
                                TA==
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                RXh0ZXJuYWw=
                                </data>
                                <key>Name</key>
                                <string>AppleAHCIPort</string>
                                <key>Replace</key>
                                <data>
                                SW50ZXJuYWw=
                                </data>
                        </dict>
                </array>
        </dict>
</pre>

此块参数主要是kext的patch。在上文中已经提及ati 显卡FB参数的修改。和一些kext的patch。

AppleRTC：防cmos重置和启动是出现的有关AppleRTC的错误

AsusAICPUPM：AppleIntelCPUPowerManagement.kext patch 为华硕主板，其他主板能用否，不知，期望选择true。

Debug：clover启动调试，一般不开启。

KernelCpu：为特别的cpu patch ，如Atom, Ivy, Pentium 4

KernelLapic：在v1731版本后加入 LAPIC kernel panic for HP notebook修复功能。使得hp笔记本启动无需输入cpu=1的启动参数。

##Graphics块参数

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>Graphics</key>
        <dict>
                <key>CustomEDID</key>
                <data>
                AP///////wAyDADfAAAAAAASAQOAIRV4CunVmVlTjigmUFQAAAABAQEBAQEB
                AQEBAQEBAQEB3iGgcFCEHzAgIFYAS88QAAAY3iGgcFCEHzAgIFYAS88QAAAA
                AAAA/gBXNjU3RwAxNTRXUDEKAAAA/gAjMz1IZYSq/wIBCiAgAJo=
                </data>
                <key>DualLink</key>
                <integer>0</integer>
                <key>FBName</key>
                <string>Makakakakala</string>
                <key>Inject</key>
                <dict>
                        <key>ATI</key>
                        <true/>
                        <key>Intel</key>
                        <true/>
                        <key>NVidia</key>
                        <true/>
                </dict>
                <key>InjectEDID</key>
                <true/>
                <key>LoadVBios</key>
                <true/>
                <key>NVCAP</key>
                <string>04000000000003000C0000000000000A00000000</string>
                <key>PatchVBios</key>
                <true/>
                <key>PatchVBiosBytes</key>
                <array>
                        <dict>
                                <key>Find</key>
                                <data>
                                EgPHx4fRCeCxr6/hBAABJBM=
                                </data>
                                <key>Replace</key>
                                <data>
                                Frmpn4+yFhQB/8/rRurAAAE=
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                QAawBMhKEBkF
                                </data>
                                <key>Replace</key>
                                <data>
                                UAUAA6ovEAcF
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                SgEDSgEIASAgA///IA==
                                </data>
                                <key>Replace</key>
                                <data>
                                TQEDTQEIASCoAv//IA==
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                QAa6hAM=
                                </data>
                                <key>Replace</key>
                                <data>
                                UAW6AAM=
                                </data>
                        </dict>
                </array>
                <key>VRAM</key>
                <integer>1024</integer>
                <key>VideoPorts</key>
                <integer>2</integer>
                <key>display-cfg</key>
                <string>03010300FFFF0001</string>
                <key>ig-platform-id</key>
                <string>0x01620005</string>
        </dict>
</pre>

CustomEDID：定制EDID,在一楼已经有说明如何定制，有什么用。
InjectEDID：注入EDID,实用clover侦测到的信息注入。当CustomEDID你已做啦正确的edid则此项目失效。
DualLink：0为关闭，1为启用。这个值开启可以解决某些高分屏花屏，黑边的问题。但某些卡必须设为0，否则进入mac可能见到4个桌面（四分屏））。
（见到四个桌面当然也不一定是这个原因）

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>Inject</key>
<dict>
<key>ATI</key>
<true/>
<key>Intel</key>
<true/>
<key>NVidia</key>
<true/>
</dict>
</pre>

以上打开显卡侦测，诸如显卡信息。看自己自己什么显卡，不要傻傻的你也全部为ture(yes).

N卡特有信息的NVCAP值,display-cfg已在前文有说。
LoadVBios:使用提取的显卡rom，应该同chameleon。不过对于A卡移动版这个值可能要开启。A卡特有信息FBName，在前文中已有说道，特别的注意，FBname就是变色龙中ati config值，其值要和你修改FB使用参数对应。
ig-platform-id是特为hd4000或hd2500准备的
其可用值有：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
ig-platform-id: 01660000, Stolen RAM for FB: 96MB, Pipes: 3, Ports: 4, FBMem: 3
ig-platform-id: 01660001, Stolen RAM for FB: 96MB, Pipes: 3, Ports: 4, FBMem: 3
ig-platform-id: 01660002, Stolen RAM for FB: 64MB, Pipes: 3, Ports: 1, FBMem: 1
ig-platform-id: 01660003, Stolen RAM for FB: 64MB, Pipes: 2, Ports: 2, FBMem: 2
ig-platform-id: 01660004, Stolen RAM for FB: 32MB, Pipes: 3, Ports: 1, FBMem: 1
ig-platform-id: 01660008, Stolen RAM for FB: 64MB, Pipes: 3, Ports: 3, FBMem: 3
ig-platform-id: 01660009, Stolen RAM for FB: 64MB, Pipes: 3, Ports: 3, FBMem: 3
ig-platform-id: 0166000A, Stolen RAM for FB: 32MB, Pipes: 2, Ports: 3, FBMem: 2
ig-platform-id: 0166000B, Stolen RAM for FB: 32MB, Pipes: 2, Ports: 3, FBMem: 2
ig-platform-id: 01620005, Stolen RAM for FB: 32MB, Pipes: 2, Ports: 3, FBMem: 2
ig-platform-id: 01620006, Stolen RAM for FB: 0MB, Pipes: 0, Ports: 0, FBMem: 0
ig-platform-id: 01620007, Stolen RAM for FB: 0MB, Pipes: 0, Ports: 0, FBMem: 0
</pre>
如上，怎么用，就是直接选择ig-platform-id写上.一般一个个试用。如我选择01660000，则其他什么的接口数，内存大小可以不设置，删啦。以此同时显卡注入开启，即

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>Intel</key>
<true/>
</pre>

ig-platform-id一个个试。找到最合适。当然也可直接用自己对应硬件的id。`system info`可以帮你查看到自己的显卡id。

## 引导界面分辨率相关

PatchVBios：设置为yes，使得在clover引导界面找到合适的分辨率。（不一定可以或支持）
当你在引导界面的分辨率满足不了你的需求，可以在安装clover是选择驱动：CsmVideoDxe-64.这个只支持UEFI BIOS。
其有说明：

Clover GUI 图形使用者介面的显示驱动，允许选择更多分辨率。基于 UEFI BIOS 的 CSM module 模组，CSM 必须 Enabled 启动。Clover 可能无法启动，可能会发生 系统唤醒 的问题。使用时，请注意相关问题。

这些设置后可能（UEFI bios）要在config.plist 的GUI块参数中添加自己的想要的分辨率（下文有介绍gui块参数）。

还是得不到自己想要的分辨率，注入EDID注入开启。再不行用PatchVBiosBytes功能。

PatchVBiosBytes：这主要是针对N卡丢失宽屏（16：9 or 16：10）分辨率的情况，这个只在clover引导界面和菊花界面有效，也不能解决一些dvi接口黑边的问题（到目前为止），这功能可能不太完善有待大伙的测试。看长篇大论：

<http://www.projectosx.com/forum/index.php?showtopic=2562&st=2840&p=22683&#entry22683>
好吧看不懂头晕

1.确认自己显示器能够支持的分辨率，比如我用Darwindumper获取的详细EDID信息，看到其内建支持的实时分辨率：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
  720x400@70Hz
  640x480@60Hz
  640x480@67Hz
  640x480@72Hz
  640x480@75Hz
  800x600@56Hz
  800x600@60Hz
  800x600@72Hz
  800x600@75Hz
  832x624@75Hz
  1024x768@60Hz
  1024x768@70Hz
  1024x768@75Hz
</pre>

标准支持的：
  
<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
  640x400@70Hz
  1024x768@72Hz
  1280x720@60Hz
</pre>

而实际分辨率是1366×768.显然无法达到。（进入系统后如何实现，不在此讨论）

而在preboot.log中我看到如下信息：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
0:409  0:000   found Detail Timing 1366x768
0:433  0:024     0 640x480 attr=3BF - ok, edid+, 640x480, working, highest, pref=0
0:434  0:000     1 800x600 attr=3BF - ok, edid+, 800x600, working, highest, pref=1
0:435  0:000     2 1024x768 attr=3BF - ok, edid+, 1024x768, working, highest, pref=2
0:435  0:000     3 1280x1024 attr=3BF - ok, edid-
0:440  0:004     4 1600x1200 attr=3BF - ok, edid-
0:440  0:000  BV new mode: 2 1024x768
1:578  1:137   SetMode pref 2 (2) = Success
</pre>

如上，edid中最大1600*1200，显然我的显示器无法达到。如果在
`<key>ScreenResolution</key>`
一项设置1600X1200
显示器会出现不支持信号的提示。设置1280X1024虽可以但很别扭。

现在我们就要使用PatchVBiosBytes功能，将edid中有的最大分辨率1600*1200进过patch变为1360*768。你会问为什么不选择1280X1024来，应为在下文中没有1280*1024的信息，我也不知道从何获取。但要明确只有edid中有的分辨率才可以使用patch后得到自己想要的分辨率。而自己想要的分辨率还必须在下文提供的信息中，不然无从patch

2.现在我们按照如下模板修改，4组值一起改。前三组key值是增加分辨率用。第四组是为使用vga接口的显示器解锁不可用分辨率用的，如果不用VGA接口，第四组可忽略，加拉也没坏处

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>PatchVBiosBytes</key>
                <array>
                        <dict>
                                <key>Find</key>
                                <data>
                                EgPHx4fRCeCxr6/hBAABJBM=
                                </data>
                                <key>Replace</key>
                                <data>
                                Frmpn4+yFhQB/8/rRurAAAE=
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                QAawBMhKEBkF
                                </data>
                                <key>Replace</key>
                                <data>
                                UAUAA6ovEAcF
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                SgEDSgEIASAgA///IA==
                                </data>
                                <key>Replace</key>
                                <data>
                                TQEDTQEIASCoAv//IA==
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                QAa6hAM=
                                </data>
                                <key>Replace</key>
                                <data>
                                UAW6AAM=
                                </data>
                        </dict>
                </array>
        </dict>
</pre>
即：
![](/wp-content/uploads/sinapicv2-backup/1071-ww4-bmiddle-a316108djw1enw8lqe4k2j20go0bvgon.jpg)
以上显示的是16进制的数值，那么要1600X1200和1360×768分辨率的值是多少呢？可如下表：对于键值key0：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
Resolution | A.Rat | HEX Representation                                 | BASE64 Representation
-----------|-------|----------------------------------------------------|-------------------------
1280x720   | 16: 9 | 16 CB 9F 9F 8F A7 17 EA D2 CF CF EB 47 E0 C0 00 01 | Fsufn4+nF+rSz8/rR+DAAAE=
1280x800   | 16:10 | 12 CD 9F 9F 91 A9 1A 3A 21 1F 1F 3B 44 FE C0 00 01 | Es2fn5GpGjohHx87RP7AAAE=
1360x768   | 16: 9 | 16 B9 A9 9F 8F B2 16 14 01 FF CF EB 46 EA C0 00 01 | Frmpn4+yFhQB/8/rRurAAAE=
1400x1050  |  4: 3 | 12 E6 AE AE 8A BB 8E 3D 1B 19 19 3E 0E 00 C0 24 12 | Euauroq7jj0bGRk+DgDAJBI=
1440x900   | 16:10 | 12 E9 B3 B3 8D BF 92 A3 85 83 83 A4 48 FE C0 00 00 | Eumzs42/kqOFg4OkSP7AAAA=
1600x900   | 16: 9 | 1A D7 C7 C7 9B CD 11 9C 86 83 83 9D 4B FE C0 00 00 | GtfHx5vNEZyGg4OdS/7AAAA=
1600x1200  |  4: 3 | 12 03 C7 C7 87 D1 09 E0 B1 AF AF E1 04 00 01 24 13 | EgPHx4fRCeCxr6/hBAABJBM=
1680x1050  | 16:10 | 12 15 D1 D1 99 E0 17 3D 1B 19 19 3E 0E 00 01 24 13 | EhXR0ZngFz0bGRk+DgABJBM=
1920X1080  | 16: 9 | 16 0E EF 9F 8F FD 02 63 3B 37 CF EB 40 00 C1 24 02 | Fg7vn4/9AmM7N8/rQADBJAI=
1920x1200  | 16:10 | 12 3F EF EF 83 01 1B D8 B1 AF AF D9 04 00 41 25 12 | Ej/v74MBG9ixr6/ZBABBJRI=
2048x1536  |  4: 3 | 12 63 FF FF 9D 12 0E 34 01 00 00 35 44 E0 41 25 13 | EmP//50SDjQBAAA1ROBBJRM=
</pre>
如用plistedit pro编辑则直接在上方把十六进制值复制过去即可：find项值(1600X1200):1203C7C7 87D109E0 B1AFAFE1 04000124 13
Replace项（1360X768）：16B9A99F 8FB21614 01FFCFEB 46EAC000 01
以下修改方法也是这样
key1所用的值：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
Resolution | A.Rat | HEX Representation         | BASE64 Representation
-----------|-------|----------------------------|----------------------
1280x720   | 16: 9 | 00 05 D0 02 A0 2C 10 07 05 | AAXQAqAsEAcF
1280x800   | 16:10 | 00 05 20 03 A0 32 10 23 05 | AAUgA6AyECMF
1360x768   | 16: 9 | 50 05 00 03 AA 2F 10 07 05 | UAUAA6ovEAcF
1400x1050  |  4: 3 | 78 05 1A 04 AF 4A 0E 21 05 | eAUaBK9KDiEF
1440x900   | 16:10 | A0 05 84 03 B4 38 10 24 05 | oAWEA7Q4ECQF
1600x900   | 16: 9 | 40-06 84 03 C8-38 10 27 05 | QAaEA8g4ECcF
1600x1200  |  4: 3 | 40 06 B0 04 C8 4A 10 19 05 | QAawBMhKEBkF
1680x1050  | 16:10 | 90 06 1A 04 D2 41 10 25 05 | kAYaBNJBECUF
1920x1080  | 16: 9 | 80 07 38 04 F0 42 10 07 05 | gAc4BPBCEAcF
1920x1200  | 16:10 | 80 07 B0 04 F0 4B 10 26 05 | gAewBPBLECYF
2048x1536  |  4: 3 | 00 08 00 06 00 60 10 22 05 | AAgABgBgECIF
</pre>
修改同上。
key2所用值：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
Resolution | A.Rat | HEX Representation                     | BASE64 Representation
-----------|-------|----------------------------------------|----------------------
           |                                           |       IDX                              |
1280x720   | 16: 9 | 7B 01 03 7B 01 08 01 20 80 02 FF FF 20 | ewEDewEIASCAAv//IA==
1280x800   | 16:10 | 61 01 03 61 01 08 01 20 80 02 FF FF 20 | YQEDYQEIASCAAv//IA==
1360x768   | 16: 9 | 4D 01 03 4D 01 08 01 20 A8 02 FF FF 20 | TQEDTQEIASCoAv//IA==
1400x1050  |  4: 3 | 49 01 03 49 01 08 01 20 BC 02 FF FF 20 | SQEDSQEIASC8Av//IA==
1440x900   | 16:10 | 65 01 03 65 01 08 01 20 D0 02 FF FF 20 | ZQEDZQEIASDQAv//IA==
1600x900   | 16: 9 | 67 01 03 67-01 08 01 20-20 03 FF FF-20 | ZwEDZwEIASAgA///IA==
1600x1200  |  4: 3 | 4A 01 03 4A 01 08 01 20 20 03 FF FF 20 | SgEDSgEIASAgA///IA==
1680x1050  | 16:10 | 69 01 03 69 01 08 01 20 48 03 FF FF 20 | aQEDaQEIASBIA///IA==
1920x1080  | 16: 9 | 4D 01 03 4D 01 08 01 20 C0 03 FF FF 20 | TQEDTQEIASDAA///IA==
1920x1200  | 16:10 | 7D 01 03 7D 01 08 01 20 C0 03 FF FF 20 | fQEDfQEIASDAA///IA==
2048x1536  |  4: 3 | 7A 01 03 52 01 08 01 20 00 04 FF FF 20 | egEDUgEIASAABP//IA==
</pre>
key3所用值，即VGA解锁：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
Resolution | A.Rat | HEX Represent. | BASE64 Represent.
-----------|-------|----------------|------------------
1280x720   | 16: 9 | 00 05 BA D0 02 | AAW60AI=
1280x800   | 16:10 | 00 05 BA 20 03 | AAW6IAM=
1360x768   | 16: 9 | 50 05 BA 00 03 | UAW6AAM=
1400x1050  |  4: 3 | 78 05 BA 1A 04 | eAW6GgQ=
1440x900   | 16:10 | A0 05 BA 84 03 | oAW6hAM=
1600x900   | 16: 9 | 40 06 BA 84 03 | QAa6hAM=
1600x1200  |  4: 3 | 40 06 BA B0 04 | QAa6sAQ=
1680x1050  | 16:10 | 90 06 BA 1A 04 | kAa6GgQ=
1920x1080  | 16: 9 | 80 07 BA 38 04 | gAe6OAQ=
1920x1200  | 16:10 | 80 07 BA B0 04 | gAe6sAQ=
2048x1536  |  4: 3 | 00 08 BA 00 06 | AAi6AAY=
</pre>

编辑完如下：
具体的：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>Graphics</key>
        <dict>
                <key>Inject</key>
                <dict>
                        <key>NVidia</key>
                        <true/>
                </dict>
                <key>LoadVBios</key>
                <false/>
                <key>PatchVBios</key>
                <false/>
                <key>PatchVBiosBytes</key>
                <array>
                        <dict>
                                <key>Find</key>
                                <data>
                                EgPHx4fRCeCxr6/hBAABJBM=
                                </data>
                                <key>Replace</key>
                                <data>
                                Frmpn4+yFhQB/8/rRurAAAE=
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                QAawBMhKEBkF
                                </data>
                                <key>Replace</key>
                                <data>
                                UAUAA6ovEAcF
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                SgEDSgEIASAgA///IA==
                                </data>
                                <key>Replace</key>
                                <data>
                                TQEDTQEIASCoAv//IA==
                                </data>
                        </dict>
                        <dict>
                                <key>Find</key>
                                <data>
                                QAa6hAM=
                                </data>
                                <key>Replace</key>
                                <data>
                                UAW6AAM=
                                </data>
                        </dict>
                </array>
        </dict>
</pre>

并且在config的gui下设置分辨率ScreenResolution为1360×768
**config设置传送门**:<http://pan.baidu.com/s/1dDqtIkL>
MD5：`83527b3b0d665c00a8edb05182641b02`

重启后有意思的来啦。前面有说我的实际显示器分辨率是1366×768，如果我成功把1360×768注入，会怎样·一个情况？
在preboot.log中我们可以看到：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
3:739  0:011  BiosVideoDriverBindingStart!
3:739  0:000  BiosVideoCheckForVbe
3:739  0:000  EdidOverride not found
3:984  0:245   Edid1-
4:230  0:245   Edid0-
4:256  0:025     0 640x480 attr=3BF - ok, 640x480, working, highest, pref=0
4:257  0:000     1 800x600 attr=3BF - ok, 800x600, working, highest, pref=1
4:257  0:000     2 1024x768 attr=3BF - ok, 1024x768, working, highest, pref=2
4:258  0:000     3 1280x1024 attr=3BF - ok
4:264  0:005     4 1360x768 attr=3BF - ok
4:264  0:000  BV new mode: 2 1024x768
4:464  0:200   SetMode pref 2 (2) = Success
4:537  0:073  LoadDrivers() end
4:537  0:000  SetScreenResolution: 1360x768 - setting Mode 4
4:537  0:000  BV new mode: 4 1360x768
4:788  0:250  SetScreenResolution: 1360x768 - already set
</pre>
已经成功，F10,引导界面截个图来瞧瞧：
![](/wp-content/uploads/sinapicv2-backup/1071-ww4-bmiddle-a316108djw1enw8nddmiej20go09e3zc.jpg)
![](/wp-content/uploads/sinapicv2-backup/1071-ww4-bmiddle-a316108djw1enw8nbct28j20go09eq3j.jpg)

## GUI块参数

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>GUI</key>
        <dict>
                <key>Hide</key>
                <array>
                        <string>CFD7529D-46AE-4170-83CC-B73FA7160347</string>
                        <string>8D7586D0-1DF3-49E6-BDDC-8D8A4849675E</string>
                        <string>FAT32</string>
                        <string>Legacy HD2</string>
                        <string>Recovery HD</string>
                        <string>Legacy HD3</string>
                        <string>Legacy HD1</string>
                </array>
                <key>Mouse</key>
                <dict>
                        <key>DoubleClick</key>
                        <integer>500</integer>
                        <key>Enabled</key>
                        <true/>
                        <key>Speed</key>
                        <integer>6</integer>
                </dict>
                <key>Scan</key>
                <dict>
                        <key>Entries</key>
                        <true/>
                        <key>Legacy</key>
                        <string>First</string>
                        <key>Tool</key>
                        <false/>
                </dict>
                <key>ScreenResolution</key>
                <string>1360x768</string>
                <key>Theme</key>
                <string>bluemac</string>
        </dict>
</pre>
这块参数，很多我根本不需要。如上基本就满足我的需求。

Hide：隐藏分区或启动文件。其值可以是efi文件路径。可以是分区的卷标名（对于fat和hfs+格式），对于ntfs格式就是在gui界面下显示的Legacy HD1等形如Legacy HD*。直接添上就可隐藏。或分区的uuid。uuid（通用唯一标识），在磁盘工具—》》信息中可以查看到。在clover的启动信息中可以看到这个全部信息。 在clover界面按F2就会保存clover的开机记录preboot.log其保存在EFI/clover/misc下。进mac也可有DrwinDumper获取。如下图：

![](/wp-content/uploads/sinapicv2-backup/1071-ww4-bmiddle-a316108djw1enw8o61bldj20go0e9411.jpg)
![](/wp-content/uploads/sinapicv2-backup/1071-ww1-bmiddle-a316108djw1enw8oz3lcbj20go088gnh.jpg)

在上面的模板中，FAT32位装变色龙的EFI分区，其卷标名为FAT32.比如某些洁癖的人讨厌看到** from EFI 的启动选项，则可直接把卷标EFI写上去，这下干净了吧。
Legacy HD* 为ntfs分区。当然如过要隐藏全部ntfs分区，只需Scan下删除Legacy选项即可（config助手不勾选）
Recovery HD 为recovery分区卷标名。默认都是这个名。其他为其他分区的UUDI。
scan项目，控制gui界面下的各个选项,可比喻为一个总开关。同时把分为三类：
一是entries，此项控mac分区。
二是legacy。控制windows分区。不勾选不加载NTFS分区。
三是tool。控制shell。
关掉tool 和legacy可以加快clover加载速度。当然直接选择text only不用gui界面，加载更快。
关于鼠标的那块
ScreenResolution：引导界面分辨率（进入mac后可不关它事）。
Speed：2-8.鼠标移动跟进速度，值越大，移动越快（鼠标轻轻动一下就可移动很远）至于主题
Theme：clover引导所用主题设置，主题名必须得和在EFI/CLOVER/themes下主题名一样主题名没设置对，会导致gui界面呈现方块的模样。

## DisableDrivers 块参数简介

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>DisableDrivers</key>
        <array>
                <string>CsmVideoDxe</string>
                <string>VBoxExt4</string>
        </array>
</pre>

这个主要是禁止EFI驱动作用。应该是试图进入mac后消除EFI驱动的影响。

## BOOT块参数

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>Boot</key>
<dict>
<key>Arguments</key>
<string>-v slide=0 npci=0x2000</string>
<key>DefaultVolume</key>
<string>MacHDD</string>
<key>Legacy</key>
<string>LegacyBiosDefault</string>
<key>LegacyBiosDefaultEntry</key>
<integer>0</integer>
<key>Log</key>
<false/>
<key>Timeout</key>
<integer>5</integer>
<key>XMPDetection</key>
<string>No</string>
</dict>
</pre>
Arguments：启动参数。

可用的有：

-v (verbose mode)
-x (safe mode)

ahcidisk=1 debug=8 :同变色龙，当遇到waiting for  root drives（AHCI已开启）时，使用这个参数试试。

dart=0 ：bios中开启VT-x/VT-d无法启动os 的可使用这个参数

arch=i386 以32位内核模式启动。此参数不适用于10.8原生内核

arch=X86_64 以64位内核模式启动。

npci=0x2000 /0x3000(PCI Configuration Fix)：适用于独立显卡。
darkwake (for setting the “Deep sleep” mode in Lion/ML)：一些mac的机型有这个参数才能深度睡眠其值自己可以测试看能否解决深度睡眠问题。
slide=0 (Needed for 10.8)

DefaultVolume：默认引导分区。可卷标名，uuid。

XMPDetection：xmp档案，一种内存超频技术只适用于DDR3。值N0(-1,0),1,2。2慎用。

Timeout：默认引导分区等待时间。0直接进入默认引导分区，没有clover引导界面。-1是进入gui界面，等待你的选择。
Legacy：值有PBR，LegacyBiosDefault，PBRtest。模拟启动的方法。有多个分区有系统的一般设为PBR（分区引导启动，PBRtest也是同样）。当选为LegacyBiosDefault是，还会出现一子项目——LegacyBiosDefaultEntry，这个是为UEFI BIOS控制传统bios引导用。
改启动参数后，删掉nvram.plist（隐藏文件，默认mac引导分区根目录）,不然参数不会生效。或终端执行命令：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
sudo rm -rf /nvram.plist
nvram -c
</pre>

## ACPI块参数

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<dict>
                <key>DSDT</key>
                <dict>
                        <key>Debug</key>
                        <true/>
                        <key>Fixes</key>
                        <dict>
                                <key>AddDTGP_0001</key>
                                <true/>
                                …….
                                <key>FixSATA_0400</key>
                                <false/>
                                <key>FixSBUS_0080</key>
                                <true/>
                                <key>FixShutdown_0004</key>
                                <true/>
                                <key>FixUSB_1000</key>
                                <true/>
                        </dict>
                        <key>Name</key>
                        <string>DSDT.aml</string>
                        <key>Patches</key>
                        <array>
                                <dict>
                                        <key>Comment</key>
                                        <string>Remove battery device from desktop</string>
                                        <key>Find</key>
                                        <data>
                                        W4IeQkFUMQhfSElEDEHQDAoIX1VJRAEUCF9T
                                        VEEApAA=
                                        </data>
                                        <key>Replace</key>
                                        <data>
                                        </data>
                                </dict>
                                <dict>
                                        <key>Comment</key>
                                        <string>Add _SUN property for GIGE</string>
                                        <key>Find</key>
                                        <data>
                                        UFhTWAhfQURSAAhfUFJXEgYC
                                        </data>
                                        <key>Replace</key>
                                        <data>
                                        UFhTWAhfQURSAAhfU1VOCgQIX1BSVxIGAg==
                                        </data>
                                </dict>
                        </array>
                        <key>ReuseFFFF</key>
                        <true/>
                        <key>SlpSmiAtWake</key>
                        <true/>
                        <key>SuspendOverride</key>
                        <true/>
                </dict>
                <key>DropTables</key>
                <array>
                        <dict>
                                <key>Signature</key>
                                <string>DMAR</string>
                        </dict>
                                   ……
                        <dict>
                                <key>Signature</key>
                                <string>SSDT</string>
                                <key>TableId</key>
                                <string>CpuPm</string>
                        </dict>
                </array>
                <key>HaltEnabler</key>
                <true/>
                <key>PatchAPIC</key>
                <true/>
                <key>ResetAddress</key>
                <string>0x64</string>
                <key>ResetValue</key>
                <string>0xFE</string>
                <key>SSDT</key>
                <dict>
                        <key>DoubleFirstState</key>
                        <true/>
                        <key>DropOem</key>
                        <true/>
                        <key>Generate</key>
                        <dict>
                                <key>CStates</key>
                                <true/>
                                <key>PStates</key>
                                <true/>
                        </dict>
                        <key>MaxMultiplier</key>
                        <integer>12</integer>
                        <key>MinMultiplier</key>
                        <integer>8</integer>
                        <key>PLimitDict</key>
                        <integer>0</integer>
                        <key>UnderVoltStep</key>
                        <integer>0</integer>
                </dict>
                <key>UseSystemIO</key>
                <true/>
                <key>smartUPS</key>
                <true/>
        </dict>
</pre>

此块参数主要是ACPI表单控制和cpu性能功耗控制。

DsdtName: dsdt.aml的名称。为那些想用FixDsdtMask功能来找到最合适的dsdt的人准备。每patched一次重命名dsdt名以区别上此patch的dsdt，这时DsdtName也做相应的改变。一般已经有完整dsdt.aml，直接拖到ACPI/patched下或启动分区根目录即可。此值一般设置为DSDT.aml(可忽略大小写)
下面是关于P-STATE和C-state的，上文已有提到如何设置
GenerateCStates: (Yes/No, default: No) 设为yes，开启c-state功能。也可以修复启动时 ACPI_SMC_PlatformPlugin 错误（fakesmc这货当然有）
GeneratePStates: (Yes/No, default: No) 设为yes，开启p-state功能
PLimitDict: (Number, default: 0) 限制cpu频率。值0，1，2。0不开启。
UnderVoltStep: (Number, default: 0) 限制cpu电压。值0，1，2。0不开启。设为2，可能死机。
DoubleFirstState: (Yes/No, default: No) Ivy Bridge专用。ivy一般设为yes。依旧是cpu功耗有关。其他cpu可删。
Fixes：就是原来的FixDsdtMask，只是直接在config中体现，直接控制。yes启用该项修复。no则不启用。各项目的定义一楼有说明。在字面上也看得出。

## 有关睡眠问题

当电脑关机或睡眠的时候，显示器关闭，但风扇依旧转，灯依旧亮。只能重启。这个情况在使用uefi bios引导中出现的概率是1：10传统bios在1：100左右（我拉去，slice怎么得出来的概率？）
在ACPI项目下增加如下键值：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
HaltEnabler – set SLP_SMI_EN=0 at early start.
FixShutdown_0004 – prevent set SLP_SMI_EN=1 at _PTS with Arg0=5 (shutdown)
SuspendOverride – extend this fix to Arg0=3,4,5 (also sleep and suspend)
SlpSmiAtWake – set SLP_SMI_EN=0 at method _WAK, so at every wake up.
</pre>

**这些开关应有助于解决这个问题。可全部勾选。**


<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
ResetAddress: (should be: 0x64) Restart address
ResetValue: (should be: 0xFE) Restart address
</pre>

UseSystemIO：未找到解释。字面上就是用系统的基本输入输出控制。也就是说撒？
以上两个值可保留，可删。如果你重启的时候有问题（重启不断电？），可按照FACP.aml中值更改。
获取该表单的最佳方法就是clover自带功能（按F2,呀，说啦好几遍啦~）。或用DarwinDumper勾选ACPI TABLE。这货DarwinDumper算是一个利器。

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
[074h 0116 12]               Reset Register : <Generic Address Structure>
[074h 0116  1]                     Space ID : 01 (SystemIO)
[075h 0117  1]                    Bit Width : 08
[076h 0118  1]                   Bit Offset : 00
[077h 0119  1]         Encoded Access Width : 01 (Byte Access:8)
[078h 0120  8]                      Address : 0000000000000CF9
[080h 0128  1]         Value to cause reset : 06
[081h 0129  3]                     Reserved : 000000
[084h 0132  8]                 FACS Address : 00000000CFF9E000
</pre>
ResetAddress:就是0xCF9
ResetValue:就是0x06

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
EnableC6: (Yes/No, default: No): Enable/disable CPU C6 reporting. (CPU Power-saving)
EnableC4: (Yes/No, default: No): Enable/disable CPU C4 reporting. (CPU Power-saving)
EnableC2: (Yes/No, default: No): Enable/disable CPU C2 reporting. (CPU Power-saving)
C3Latency: (should be: 0x03e7) If CPU supports Turbo, you need to set this to 0x00FA.
</pre>

一般设为0x03e7即十进制数999，在ACPI规范中有如下叙述：

>Take a look at page 118 of the ACPI 5.0 specification, which reads:
“The worst-case hardware latency, in microseconds, to enter and exit a C2 state. A value > 100 indicates the system does not support a C2 state.”
and
‘The worst-case hardware latency, in microseconds, to enter and exit a C3 state. A value > 1000 indicates the system does not support a C3 state.”

所以要想开启C3功能得先确定C3Latency的值是否<1000(0x03e8),在FACP.aml中搜索C3我们可以看到如下：
![](/wp-content/uploads/sinapicv2-backup/1071-ww2-bmiddle-a316108djw1enw8qzc4rtj20go0cbgo7.jpg)

如上图显然在默认情况下C3Latency=0x03e9=1001，无法启用C3.所以得设置此值为比1000小的数。若要启用，此值可设为0x03e7。如果你的cpu支持睿频（ Turbo）技术，设置为0x00FA可起作用。
PluginType ：选择电源管理插件类型，值为0是使用ACPI_SMC_PlatformPlugin；值为1时用X86PlatformPlugin，不过此插件只适用于ivy架构cpu。
EnableISS: (Yes/No, default: No) ：设为yes，可修复出现ACPI_SMC_PlatformPlugin 的错误。
smartUPS: (Yes/No, default: No) For MacPro – cosmetic ,影响电源管理。
PatchAPIC: (Yes/No, default: No) Fix NMI in APIC table. 在ACPI表单中NMI丢失时，mac启动可能五国，启动是要用CPUS=1。所以这个可以起到这个作用。没有这个问题的可以忽略。
debug：未找到有关解释。
Name：你装载和注入的dsdt的文件名
DropOem：获取内建SSDT表单。clover可以自动获取，当然你也可以把自己修改好的ssdt放到 EFI/clover/ACPI/patched.
Generate：生成带 p-states and c-states功能的ssdt。

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>Generate</key>
<dict>
  <key>CStates</key>
  <true/>
</dict>
</pre>
此参数有关EnableC2, EnableC4, EnableC6, EnableISS, C3Latency的功能，可自行体验。其会在ssdt中添加_CST 函数，请自行体验对比。此参数不启用在-v图中可能会出现如下错误：

ACPI_SMC_PlatformPlugin::pushCPU_CSTData – _CST evaluation failed.

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>Generate</key>
<dict>
  <key>PStates</key>
  <true/>
</dict>
</pre>
此参数会在自动生成的ssdt表单processor 部分天添加 _PCT, _PPC and _PSS methods.

1._PCT – Performance control. 有关 SpeedStep功能。
2._PPC – Performance Present Capabilities。控制cpu频率范围。
_PSS – Performance Supported States.一组包含可能的 CPU states – P-States数组。
PLimitDict, UnderVoltStep and Turbo都和他有所关系。
PLimitDict, UnderVoltStep就不说啦，上面已有提到，就是限制cpu频率和电压。和功耗相关。
MaxMultiplier：此项非必要不建议设置。最大倍频，亦即cpu变频最大档位？？？
MinMultiplier：最小倍频挡位数，一般为8。
第三部分是有关获取acpi表单的控制。不懂的路过。

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>DropTables</key>
<array>
  <dict>
    <key>Signature</key>
    <string>SSDT</string>
    <key>TableId</key>
    <string>SataTabl</string>
  </dict>
  <dict>
    <key>Signature</key>
    <string>SSDT</string>
    <key>TableId</key>
    <string>SataAddr</string>
  </dict>
  <dict>
    <key>Signature</key>
    <string>BGRT</string>
  </dict>
  <dict>
    <key>TableId</key>
    <string>A M I</string> (WARNING: DO NOT DO THIS!!!!!!!)
  </dict>
  ...
</array>
</pre>
DropTables项目下的：
SSDT:  获取ssdt表单或使用EFI/ACPI/patched下的SSDT-*.aml。
DMAR: 可修复 启动时AppleACPIPlatform.kext错误 for 10.8.2.
HPET、MCFG:同样获取MCFG表单
…..
BGRT:  使用bios内置的启动图片。无意义可删。
这个很烦，一般我们只要如下设置即可：

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>DropTables</key>
                <array>
                        <dict>
                                <key>Signature</key>
                                <string>DMAR</string>
                        </dict>
                        <dict>
                                <key>Signature</key>
                                <string>SSDT</string>
                                <key>TableId</key>
                                <string>CpuPm</string>
                        </dict>
                </array>

</pre>

即只要获取内置SSDT和DMAR表单即可。一般我们只要这两项。

在Rev 2295   -新增通过表单长度获取ssdt表单
因为发现某些机子如Acer 笔记本，其ssdt表单TableID都是一样的。

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
<key>DropTables</key>
       <array>
            <dict>
               <key>Signature</key>
               <string>SSDT</string>
               <key>Length</key>
               <integer>720</integer>
           </dict>
       </array>
</pre>

TableID和Length（转化为10进制）都可以在原版ssdt表单中找到。

<pre class="brush: c; ruler: true; first-line: 0; highlight: [] ; auto-links: true ; collapse: true ; gutter: true; ">
* Intel ACPI Component Architecture
* AML Disassembler version 20091214
*
* Disassembly of ./SSDT.aml, Sat Nov 23 19:20:06 2013
*
*
* Original Table Header:
*     Signature        "SSDT"
*     Length           0x0000007B (123)
*     Revision         0x01
*     Checksum         0x52
*     OEM ID           "PmRefA"
*     OEM Table ID     "CpuCst"
*     OEM Revision     0x00001000 (4096)
*     Compiler ID      "INTL"
*     Compiler Version 0x20091214 (537465364)
*/
DefinitionBlock ("./SSDT.aml", "SSDT", 1, "PmRefA", "CpuCst", 0x00001000)
</pre>
如上，这个是用DSDTSE在mac下获取的ssdt表单，表头注释如上。

这么：
Signature=SSDT  ;Table ID=CpuCst  ; Length= 0x0000007B=123

![](/wp-content/uploads/sinapicv2-backup/1071-ww1-bmiddle-a316108djw1enw8rqz54zj20go04j0tq.jpg)
![](/wp-content/uploads/sinapicv2-backup/1071-ww2-bmiddle-a316108djw1enw8t9vcfqj20go0cbtat.jpg
)
![](/wp-content/uploads/sinapicv2-backup/1071-ww3-bmiddle-a316108djw1enw8tqe01lj20go09dzks.jpg
)
![](/wp-content/uploads/sinapicv2-backup/1071-ww3-bmiddle-a316108djw1enw8ulpbmoj20go092q6q.jpg)
![](/wp-content/uploads/sinapicv2-backup/1071-ww1-bmiddle-a316108djw1enw8uqnah4j20go0fywhm.jpg)


